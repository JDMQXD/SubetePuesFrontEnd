<div class="vehiculo-container">
  <!-- üîÑ Estado de carga -->
  <div *ngIf="loading" class="loading">
    <p>Cargando veh√≠culos...</p>
  </div>

  <!-- ‚ö†Ô∏è Mensaje de error -->
  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <!-- üß© Filtros -->
  <div class="filtros" *ngIf="!loading && !error">
    <h3>Filtros de b√∫squeda</h3>

    <div class="filtro-row">
      <!-- Marca -->
      <div class="filtro">
        <label for="marca">Marca:</label>
        <select id="marca" [(ngModel)]="filtroMarca" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let marca of marcas" [value]="marca">{{ marca }}</option>
        </select>
      </div>

      <!-- Modelo -->
      <div class="filtro">
        <label for="modelo">Modelo:</label>
        <input
          id="modelo"
          type="text"
          [(ngModel)]="filtroModelo"
          (input)="aplicarFiltros()"
          placeholder="Buscar modelo..."
        />
      </div>

      <!-- Ciudad -->
      <div class="filtro">
        <label for="ciudad">Ciudad:</label>
        <select id="ciudad" [(ngModel)]="filtroCiudad" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let c of ciudades" [value]="c">{{ c }}</option>
        </select>
      </div>

      <!-- Departamento -->
      <div class="filtro">
        <label for="departamento">Departamento:</label>
        <select id="departamento" [(ngModel)]="filtroDepartamento" (change)="aplicarFiltros()">
          <option value="">Todos</option>
          <option *ngFor="let d of departamentos" [value]="d">{{ d }}</option>
        </select>
      </div>

      <!-- Categor√≠a -->
      <div class="filtro">
        <label for="categoria">Categor√≠a:</label>
        <select id="categoria" [(ngModel)]="filtroCategoria" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <!-- Tipo -->
      <div class="filtro">
        <label for="tipo">Tipo:</label>
        <select id="tipo" [(ngModel)]="filtroTipo" (change)="aplicarFiltros()">
          <option value="">Todos</option>
          <option *ngFor="let t of tipos" [value]="t">{{ t }}</option>
        </select>
      </div>
    </div>

    <div class="botones-filtro">
      <button (click)="aplicarFiltros()">Aplicar filtros</button>
      <button class="limpiar" (click)="limpiarFiltros()">Limpiar filtros</button>
    </div>
  </div>

  <!-- üöò Lista de veh√≠culos -->
  <div *ngIf="!loading && !error">
    <h3>Veh√≠culos disponibles ({{ vehiculosFiltrados.length }})</h3>

    <div *ngIf="vehiculosFiltrados.length === 0" class="sin-resultados">
      <p>No se encontraron veh√≠culos con los filtros seleccionados.</p>
    </div>

    <div class="vehiculos-grid">
      <!-- üß± Tarjeta de veh√≠culo -->
      <div *ngFor="let v of vehiculosFiltrados" class="vehiculo-card">
        <!-- ‚úÖ Click en toda la tarjeta para ver detalles -->
        <div class="vehiculo-info" [routerLink]="['/reservas']">
          <h4>{{ v.marca }} {{ v.modelo }}</h4>
          <p><strong>Tipo:</strong> {{ v.tipoVehiculo?.nombre }}</p>
          <p><strong>Categor√≠a:</strong> {{ v.tipoVehiculo?.categoria?.nombre }}</p>
          <p><strong>Ciudad:</strong> {{ v.ubicacion?.nombre }}</p>
          <p><strong>Departamento:</strong> {{ v.ubicacion?.departamento?.nombre }}</p>
        </div>

        <!-- üöó Bot√≥n de reservar -->
        <div class="vehiculo-actions">
          <button type="button" (click)="irAReservas()">Reservar</button>
        </div>
      </div>
    </div>
  </div>
</div>
