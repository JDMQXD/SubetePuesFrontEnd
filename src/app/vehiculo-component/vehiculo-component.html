

<div class="vehiculo-container">
  

  <div *ngIf="loading" class="loading">
    <p>Cargando vehículos...</p>
  </div>


  <div *ngIf="error" class="error">
    {{ error }}
  </div>


  <div class="filtros" *ngIf="!loading && !error">
    <h3>Filtros de búsqueda</h3>

    <div class="filtro-row">
      <div class="filtro">
        <label>Marca:</label>
        <select [(ngModel)]="filtroMarca" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let marca of marcas" [value]="marca">{{ marca }}</option>
        </select>
      </div>

      <div class="filtro">
        <label>Modelo:</label>
        <input type="text" [(ngModel)]="filtroModelo" (input)="aplicarFiltros()" placeholder="Buscar modelo...">
      </div>

      <div class="filtro">
        <label>Ciudad:</label>
        <select [(ngModel)]="filtroCiudad" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let c of ciudades" [value]="c">{{ c }}</option>
        </select>
      </div>

      <div class="filtro">
        <label>Departamento:</label>
        <select [(ngModel)]="filtroDepartamento" (change)="aplicarFiltros()">
          <option value="">Todos</option>
          <option *ngFor="let d of departamentos" [value]="d">{{ d }}</option>
        </select>
      </div>

      <div class="filtro">
        <label>Categoría:</label>
        <select [(ngModel)]="filtroCategoria" (change)="aplicarFiltros()">
          <option value="">Todas</option>
          <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <div class="filtro">
        <label>Tipo:</label>
        <select [(ngModel)]="filtroTipo" (change)="aplicarFiltros()">
          <option value="">Todos</option>
          <option *ngFor="let t of tipos" [value]="t">{{ t }}</option>
        </select>
      </div>
    </div>

    <div class="botones-filtro">
      <button (click)="aplicarFiltros()">Aplicar filtros</button>
      <button class="limpiar" (click)="limpiarFiltros()">Limpiar filtros</button>
    </div>
  </div>


  <div *ngIf="!loading && !error">
    <h3>Vehículos disponibles ({{ vehiculosFiltrados.length }})</h3>

    <div *ngIf="vehiculosFiltrados.length === 0" class="sin-resultados">
      <p>No se encontraron vehículos con los filtros seleccionados.</p>
    </div>

    <div class="vehiculos-grid">
      <div *ngFor="let v of vehiculosFiltrados" class="vehiculo-card">
        <div class="vehiculo-info" [routerLink]="['/detalles', v.idVehiculo]">
          <h4>{{ v.marca }} {{ v.modelo }}</h4>
          <p><strong>Tipo:</strong> {{ v.tipoVehiculo?.nombre }}</p>
          <p><strong>Categoría:</strong> {{ v.tipoVehiculo?.categoria?.nombre }}</p>
          <p><strong>Ciudad:</strong> {{ v.ubicacion?.nombre }}</p>
          <p><strong>Departamento:</strong> {{ v.ubicacion?.departamento?.nombre }}</p>
          <p><strong>Diponibilidad:</strong>{{ v.disponibilidad?.nombre }}</p>
        </div>


        <div class="vehiculo-actions">
          <button [routerLink]="['/detalles', v.idVehiculo]">
            Reservar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
